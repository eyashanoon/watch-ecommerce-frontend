<body>
  <main class="page-content">
    <div class="container">

      <!-- Toast -->
      <div class="toast-container" *ngIf="showToast">
        <div class="toast show">{{ toastMessage }}</div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar" *ngIf="hasRole('ADMIN')">
        <button (click)="toggleSidebar()">â˜°</button>
        <div class="sidebar-content" *ngIf="sidebarVisible">
          <ng-container *ngIf="hasRole('CONTROLADMINS'); else limitedMenu">
            <button (click)="goToManageAdminsPage()">Control Admins</button>
            <button (click)="goToProductPage()">Product Management</button>
            <button (click)="goToOrderPage()">Order Management</button>
          </ng-container>
          <ng-template #limitedMenu>
            <button *ngIf="hasRole('ADMIN')" (click)="goToManageAdminsPage()">Control Admins</button>
            <button *ngIf="hasRole('ADMIN')" (click)="goToProductPage()">Product Management</button>
            <button *ngIf="hasRole('ADMIN')" (click)="goToOrderPage()">Order Management</button>
          </ng-template>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main" [class.blur-background]="selectedCard !== null" (click)="selectedCard = null">
        <div class="grid">

          <!-- Row 1: Product Charts -->
          <div class="card-row">

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 0"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 0 ? null : 0)">
              <div class="card">
                <figure>Yearly Product Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="yearlyProductChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 1"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 1 ? null : 1)">
              <div class="card">
                <figure>Monthly Product Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="monthlyProductChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 2"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 2 ? null : 2)">
              <div class="card">
                <figure>Daily Product Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="dailyProductChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

          </div>

          <!-- Row 2: Order Charts -->
          <div class="card-row">

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 3"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 3 ? null : 3)">
              <div class="card">
                <figure>Yearly Order Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="yearlyOrderChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 4"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 4 ? null : 4)">
              <div class="card">
                <figure>Monthly Order Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="monthlyOrderChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

            <div class="card-wrapper"
                 [class.focused]="selectedCard === 5"
                 (click)="$event.stopPropagation(); selectedCard = (selectedCard === 5 ? null : 5)">
              <div class="card">
                <figure>Daily Order Report ðŸ“ˆ</figure>
                <div style="width: 300px; height: 250px;">
                  <canvas baseChart
                          [data]="dailyOrderChartData"
                          [options]="lineChartOptions"
                          [type]="lineChartType">
                  </canvas>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>

    </div>
  </main>
</body>
